<!DOCTYPE html>
<html>
<head>
	<title>Currency Converter</title>
</head>
<body style="text-align: center;">

<div style="background-color: #b3d1ff; margin: 100px; padding: 100px;">
<h1>Currency Converter</h1>
<p>Write a Value for get Currenct Price</p>
<div style="text-align:center; margin: 10px;">
<select name="currency1" id="currency1" onchange="drop1()">
</select>

<input type="number" id="c1" name="txt1" placeholder="0" onchange="drop1()">
</div>

<div style="text-align:center;" >
<select name="currency2" id="currency2" onchange="drop2()">
</select>
 
<input id="c2" name="txt2" placeholder="0" onchange="drop2()">
</div>
<button id="cnt" onclick="convert()" style="margin-top: 10px; margin-bottom: 20px;">Convert</button>
</div>

<script>
  	//Define currency worldwide for use in other all function 
	var currency = [];

	//Get Data from API
    	const api_url = "http://data.fixer.io/api/latest?access_key=902b9d44253615805d5985ba2bd81669";
    	async function getapi(url){
    		const response = await fetch(url);
    		var dataAPI = await response.json();
    		currency = dataAPI.rates;
    		if (response) {

		var newCurrency = [];

for(var code in currency){
	var setObjName={};
	setObjName['label'] = code;
	setObjName['value'] = currency[code];
	newCurrency.push(setObjName);

	//DropDown Currency First
	var dropDown = document.getElementById("currency1");
	var option = document.createElement("option")
	option.textContent = code;
	option.value = code;
	dropDown.appendChild(option);

	//DropDown Currency Second
	var dropDown = document.getElementById("currency2");
	var option = document.createElement("option")
	option.textContent = code;
	option.value = code;
	dropDown.appendChild(option);
	currency2.selectedIndex = 1;
	 }
   } 
}
getapi(api_url);

//Convert Button for Change Currency & But onchange input function already given
function convert(){
	var input1 = document.getElementById("c1").value;
	var input2 = document.getElementById("c2").value;

	var selectedDrop = document.getElementById("currency1").value;
		var selectedDrop2 = document.getElementById("currency2").value;
		var data = currency[selectedDrop];
		var data2 = currency[selectedDrop2];

		var input1 = document.getElementById("c1").value;
		var input2 = document.getElementById("c2").value;

		var result = document.getElementById("c2").value = data1*input1;
		if (input1 == '') 
		{
			alert("Please write any Value")
		}else(document.getElementById("c2").value =  input1);
}
	
//First drop downdown function for change input value for second input
function drop1(){
	var selectedDrop = document.getElementById("currency1").value;
	var data1 = currency[selectedDrop];
	var input1 = document.getElementById("c1").value;
	var result1 = document.getElementById("c2").value = data1*input1;

}

//Second drop downdown function for change input value for First input
function drop2(){
	var selectedDrop = document.getElementById("currency2").value;
	var data2 = currency[selectedDrop];
	var input1 = document.getElementById("c1").value;
	var input2 = document.getElementById("c2").value;
	var result2 = document.getElementById("c1").value = data2*input2;

	//var result2 = document.getElementById("c2").value = data2*input1;
}
</script>
</body>
</html>
